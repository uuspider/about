---
layout: post
title: vi/vim guide
---
## vi/vim 指引

参考：[Learn Vim Progressively][ref1]{:target="_blank"}, [简明vim练级攻略][ref2]{:target="_blank"}

[ref1]:http://yannesposito.com/Scratch/en/blog/Learn-Vim-Progressively/
[ref2]:http://coolshell.cn/articles/5426.html

<h2 id="top"></h2>

***

*   [模式](#mode)
*   [移动光标](#move)
*   [插入](#insert)
*   [删除](#delete)
*   [复制](#copy)
*   [替换与撤销](#undo)
*   [查找](#find)
*   [块操作](#block)
*   [自动补齐](#auto)
*   [分屏](#split)
*   [功能设定](#set)

***

### 模式 {#mode}

打开vi后就是普通模式，按`i`进入输入模式，按`Esc`返回普通模式，按`:`进入命令行模式，输入命令运行后自动返回普通模式。

`:w`是保存，`:q`是退出，`:x`和`:wq`是保存并退出，`:q!`是不保存并强制退出。

**[[TOP](#top)]**

***

### 移动光标 {#move}

`j`,`k`,`h`,`l`分别对应上下左右，`w`是移动到下一个单词开头，`b`是移动到上一个单词开头。这些动作之前都可以加数字N，表示重复动作N次。

`NG`移动光标到第N行，`gg`移动光标到首行，`G`移动光标到末行；使用`<Ctrl+o>`可快速返回到原光标处。

`0`和`^`移动光标到行首，`$`移动光标到行尾，`f字母`向后搜索“字母”并跳转到第一个匹配项，`F字母`向后搜索“字母”并跳转到第一个匹配项。

**[[TOP](#top)]**

***

### 插入 {#insert}

`i`在光标处插入字符，`a`在光标后插入字符，`I`,`A`则是行首和行末插入，`o`是在本行之后插入新行，`O`是本行之前插入新行。

**[[TOP](#top)]**

***

### 删除 {#delete}

`x`删除光标处字符，`dd`删除整行，`dw`删除一个单词，`d$`或`D`删除至行尾，`d^`删除至行首，`dG`删除至末行，`d1G`删除至首行。

`x`,`dd`,`dw`前都可以加数字N，表示重复删除动作N次。

**[[TOP](#top)]**

***

### 复制 {#copy}

`yy`复制光标所在行，`5yy`复制5行，`y^`复制行首到光标之前的字符，`y$`复制光标到行尾的字符，`y5w`复制5个单词，`yG`复制至末行，`y1G`复制从首行到当前行；`dd`剪切当前行。

`p`粘贴至光标后。

**[[TOP](#top)]**

***

### 替换与撤销 {#undo}

`r`替换当前字符，`R`连续替换，直至按下`Esc`，`cc`替换整行，`cw`替换单词，`C`替换光标到行末的字符，`uN`撤销N次操作，`U`撤销当前行的所有修改，`<Ctrl+r>`撤销undo。

**[[TOP](#top)]**

***

### 查找 {#find}

`/`表示向后查找，`?`表示向前查找。

`*`和`#`分别表示向后和向前查找光标处的单词，`g*`和`g#`表示部分符合该单词即可。

`%`查看匹配的括号。

在查找模式下，`n`表示继续查找，`N`表示反向查找。

**[[TOP](#top)]**

***

### 块操作 {#block}

`v`可视化工具，在该模式下可将光标经过的地方标记反白并选定，`V`按行选定，`<Ctrl+v>`按块选定(与`jk`等配合使用)，选定的区域可用`d`删除或`y`复制。

    0 <Ctrl+v> Nj I# ESC

适用于注释多行文本。

`0`将光标移动到行首，`<Ctrl+v>`开始块操作，`j`标记块，`I# `插入#，`ESC`确认生效。

**[[TOP](#top)]**

***

### 自动补齐 {#auto}

在插入模式下按`<Ctrl+n>`，将启用自动补齐功能。

**[[TOP](#top)]**

***

### 分屏 {#split}

`:sp`或`:split`为水平分屏，`:vsp`或`:vsplit`为垂直分屏。

`<Ctrl+w>``[hjkl]`切换分屏。

`<Ctrl+w>``[_|]`最大化分屏，`<Ctrl+w>``[+-]`增加或减小分屏尺寸。

**[[TOP](#top)]**

***

### 常用功能设定 {#set}

`:set all`显示所有的设定值。

`:set number`显示行号，简写nu；`:set nonumber`不显示行号，简写nonu。

`:set shiftwidth=4`设置`>>`的缩进字符数，简写sw。

`:set autoindent`开启自动缩进，简写ai。

**[[TOP](#top)]**

***