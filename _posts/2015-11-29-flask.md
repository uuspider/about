---
layout: post
title: flask guide
---
## flask 指引

参考：[Python basics][ref1]{:target="_blank"}, [A byte of python][ref2]{:target="_blank"}, [Dive into python][ref3]{:target="_blank"}

[ref1]:http://www.runoob.com/python/python-tutorial.html
[ref2]:http://www.swaroopch.com/notes/python/
[ref3]:http://www.diveintopython.net/

<h2 id="top"></h2>

***

*   [变量](#var)
*   [数据结构](#structure) : [列表,元组](#list) \| [字典,集合](#set)
*   [流程控制](#stream) : [分支](#if) \| [循环](#while) \| [异常](#try)
*   [函数](#func)
*   [输入输出](#io)
*   [类](#class)
*   [模块](#import)

***

## 安装 {#var}

    $ pip install flask

    >>> import flask

**[[TOP](#top)]**

***

## 启动服务 {#structure}

    $ cat hello.py
    from flask import Flask
    app = Flask(__name__)
    @app.route('/')
    def index():
        return '<h1>Hello Flask</h1>'
    if __name__ == '__main__':
        app.run()
    $ python hello.py
    * Running on http://127.0.0.1:5000/

在本机浏览器上打开 http://127.0.0.1:5000/ 即可看到运行结果。要从网络上访问服务，需要安装`flask-script`：

    $ pip install flask-script
    $ cat hello.py
    from flask import Flask
    from flask.ext.script import Manager
    app = Flask(__name__)
    @app.route('/')
    def index():
        return '<h1>Hello Flask</h1>'
    if __name__ == '__main__':
        app.run(host='0.0.0.0', port=5000, debug=True)
    $ python hello.py
    * Running on http://0.0.0.0:5000/

文件目录：

    - hello.py

**[[TOP](#top)]**

***

## 模板 {#io}

    $ pip install Jinja2
    $ cat hello.py
    from flask import Flask, render_template
    from flask.ext.script import Manager
    app = Flask(__name__)
    @app.route('/')
    def index():
        return render_template('index.html')
    if __name__ == '__main__':
        app.run(host='0.0.0.0', port=5000, debug=True)
    $ cat templates/index.html
    <html>
      <head>
        <title>test</title>
      </head>
      <body>
          <h1>Hello, Jinja2</h1>
      </body>
    </html>
    $ python hello.py
    * Running on http://0.0.0.0:5000/

文件目录：

    -+- hello.py
     |- templates/index.html

**[[TOP](#top)]**

***

## 类 {#class}

创建一个类：

    class Person:
        def __init__(self, age, name):
            self.age = age
            self.name = name
        def birthday(self):
            self.age = self.age + 1

这里创建了一个名为`Person`的类，`__init__`设置了类的属性，`birthday()`是`Person`对象的一个方法。

下面来看看怎么使用这个类(创建实例)：

    hanmeimei = Person(15, "HanMeimei")
    lilei = Person(16,"LiLei")
    print lilei.name, lilei.age
    print hanmeimei.name, hanmeimei.age

类可以继承，构成“超类”、“子类”等，类中的方法还可以重写，这些概念的作用需要在写代码过程中理解和领悟。

**[[TOP](#top)]**

***

## 模块 {#import}

`import`用于导入模块，也就是将python代码从另一个文件中转移到当前程序中，如：

    import re

也可以只导入模块中的一部分代码(函数、类等)，如：

    from re import match

**[[TOP](#top)]**

***