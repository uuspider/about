---
layout: post
title: git guide
---
## git 指引

参考：[git简明指南][ref1]{:target="_blank"}, [廖雪峰git教程][ref2]{:target="_blank"}, [猴子都能懂的git教程][ref3]{:target="_blank"}, [Pro Git][ref4]{:target="_blank"}

[ref1]:http://rogerdudler.github.io/git-guide/index.zh.html
[ref2]:http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000
[ref3]:http://backlogtool.com/git-guide/cn/
[ref4]:https://git-scm.com/book/zh

<h2 id="top"></h2>

***

*   [安装配置](#setup) : [用户信息](#basic_template) \| [编辑器](#var) \| [查看配置](#stream) \| [帮助](#stream)
*   [建立仓库](#init) : [push](#push) \| [clone](#clone)
*   [记录更新](#commit) : [remote](#remote) \| [pull](#pull)
*   [分支管理](#branch) : [简单模板](#basic_template) \| [变量](#var) \| [流程控制](#stream)


***

git是分布式版本控制系统，每个客户端都保存了整个**代码仓库**，在本地对文件进行修改后，保存在暂存区域，最后再提交更新，在此过程中，只有提交更新需要连接网络，因此，git对版本控制的操作并不依赖网络，便于保持数据的完整性和版本历史的洁净。

## 安装配置 {#setup}

    $ sudo apt-get install git

初次运行git之前需要配置一些参数和变量，包括`/etc/gitconfig`、`~/.gitconfig`或`~/.config/git/config`以及当前使用仓库git目录中的`config`(.git/config)，这三个文件中，后一个配置会覆盖上一级别的配置。需要配置的参数和变量包括：

### 用户信息

    $ git config --global user.name "Tom King"
    $ git config --global user.email wtking@gmail.com

git会把用户名和email写入每一次版本提交，并且不可更改。这里`--global`选项是针对全系统设置的，如果针对特定项目使用不同用户名和email时，就不要使用该选项。

### 编辑器

git默认使用vim，如果想使用emacs，可以这样配置：

    $ git config --global core.editor emacs

git可以彩色显示：

    $ git config --global color.ui auto

还可以为git命令设定别名，如将`checkout`缩略为`co`等：

    $ git config --global alias.co checkout
    $ git config --global alias.br branch
    $ git config --global alias.ci commit
    $ git config --global alias.st status

### 查看配置信息

    $ git config --list # 查看所有配置
    $ git config user.name # 查看指定项配置

### 帮助

    $ git help config

**[[TOP](#top)]**

***

## 建立仓库 {#init}

将当前目录所有文件导入git：

    $ git init

该命令创建一个`.git`子目录，初始化git仓库所有的必须文件。

    $ git add *.py
    $ git commit -m 'commit message'

`git add <filename>`将文件快照添加到暂存区，`git add .`表示将当前目录所有文件快照加入暂存区，`git commit`是将暂存区快照提交到本地git仓库(HEAD)，`-m`后可输入代码提交的说明信息。

    $ git status

查看当前git仓库的状态。

    $ git log

查看git日志。

### 将本地git仓库推送到远端 {#remote}

如果远端服务器还没有建立相应的git仓库，可使用`remote add`将本地git仓库推送过去：

    $ git remote add <remote-name> <url>

远端'remote-name'可以这样修改：

    $ git remote rename pre-name new-name

如果远端git仓库<remote-name>不再使用，可以这样删除：

    $ git remote rm <remote-name>

### 将远端git仓库复制到本地 {#clone}

使用`clone`可将远端服务器上git仓库所有文件和版本信息都复制到本地：

    $ git clone https://github.com/USERNAME/repo LocalGitName

git支持ssh和git协议，如：

    $ git clone ssh://git@github.com:22/USERNAME/repo.git

建立git仓库后，就可以在本地管理和编辑工作文件，然后推送到远端。

**[[TOP](#top)]**

****

## 记录更新 {#push}

完成工作文件的编辑后，可使用`add`和`commit`提交本次更新到本地git仓库：

    $ git add *.py
    $ git commit -m 'commit message'

如果是将当前目录所有文件快照都加入仓库，即`git add .`，则上述这两条命令可以合并处理：

    $ git commit -a -m 'commit message'

如果远端服务器已经存在当前git仓库，可以直接使用`push`将本地git仓库的更新推送过去：

    $ git push origin master

其格式为`git push -u <remote-name> <branch-name>`，注意如果指定了`-u`选项，此后的推送便可以省略'remote-name'和'branch-name'，首次运行时不可省略。

### 查看远端仓库

    $ git remote

列出远端git仓库名称。

    $ git remote -v

列出远端git仓库名称与其对应的url。

    $ git remote show origin

通过`git remote show [remote-name]`，可以查看远端仓库url和分支信息，如果不指定'remote-name'，可以列出更多信息。

### 将远端git仓库更新同步到本地

如果远端git仓库有更新，可以使用`pull`将其同步到本地git仓库：

    $ git pull origin master

执行`push`或`pull`时，如果省略远端git仓库名称，则默认其为origin，因此，习惯上都会把远端git仓库命名为'origin'。

**[[TOP](#top)]**

****

## 分支管理 {#push}
