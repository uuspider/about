<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <link rel="shortcur icon" href="/images/i32.ico" type="image/x-icon" />
  <title>generator expressions</title>
  <meta name="author" content="uuspider" />
  <meta name="description" content="about uuspider" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0" >
  <link rel="stylesheet" href="/css/styles.css" />

</head>
<body>

  <style type="text/css">
pre {
  padding:8px 15px;
  background: #f8f8f8;  
  border:1px solid #e5e5e5;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  -ms-border-radius: 6px;
  -o-border-radius: 6px;
  border-radius: 6px;
  overflow-x: auto;
}
pre,code {
  background:#e8f5fe;color:#000;
}
</style>

<h2 id="python-">python 推导式</h2>

<p>参考：<a href="https://www.python.org/dev/peps/pep-0202/" target="_blank">List Comprehensions</a>, <a href="http://blog.chinaunix.net/uid-28631822-id-3488324.html" target="_blank">List 推导式</a>, <a href="https://www.python.org/dev/peps/pep-0274/" target="_blank">Dict Comprehensions</a></p>

<h2 id="top"></h2>

<hr />

<ul>
  <li><a href="#list">列表推导式</a></li>
  <li><a href="#dict">字典和集合推导式</a></li>
</ul>

<hr />

<h2 id="list">列表推导式</h2>

<p>列表推导式常用于创建新列表，其基本格式为：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[ expr for var in collection if condition ]
</code></pre>
</div>

<p>如创建一个列表：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; [ (x, y, x + y) for x in range(2) for y in range(3) ]
[(0, 0, 0), (0, 1, 1), (0, 2, 2), (1, 0, 1), (1, 1, 2), (1, 2, 3)]
</code></pre>
</div>

<p>这个列表中每个元素为一个元组，元组中的每一个元素都由推导式给出。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; [(x,y) for x in range(10) if x%2 if x&gt;3 for y in range(10) if y&gt;7 if y!=8]
[(5, 9), (7, 9), (9, 9)]
</code></pre>
</div>

<p>这个推导式中包含两个for语句，每个for语句包含两个if语句，每个if语句属于离它最近的左边的for语句。</p>

<p>推导式还可以嵌套，如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&gt;&gt;&gt; lis = [[3,4,5,6],[4,5,6,7],[6,7,8,9]]
&gt;&gt;&gt; [x for li in lis for x in li if x%2]
[3, 5, 5, 7, 7, 9]
</code></pre>
</div>

<p><strong>[<a href="#top">TOP</a>]</strong></p>

<hr />

<h2 id="dict">字典和集合推导式</h2>

<p>字典和集合推导式与列表推导式的格式相似，如：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="err">key:</span><span class="w"> </span><span class="err">value</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">(key,</span><span class="w"> </span><span class="err">value)</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">collection</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">condition</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="err">key:</span><span class="w"> </span><span class="err">foo(key)</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">key</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">collection</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">condition</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">{</span><span class="w"> </span><span class="err">expr</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">var</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">collection</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">condition</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>注：字典和集合推导式需要python 2.7和python 3.1以上版本支持。</p>

<p><strong>[<a href="#top">TOP</a>]</strong></p>

<hr />




<div  style="display:none"><script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1264508560'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s13.cnzz.com/z_stat.php%3Fid%3D1264508560%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script></div>
</body>
</html>
